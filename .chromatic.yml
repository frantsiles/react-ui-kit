# =======================
# üé® CHROMATIC CONFIG
# =======================
# Configuraci√≥n para testing visual autom√°tico

# Project settings
projectToken: ${CHROMATIC_PROJECT_TOKEN}

# Build settings
buildScriptName: 'build-storybook'
storybookBuildDir: 'storybook-static'

# =======================
# üöÄ PERFORMANCE
# =======================
# Skip builds for certain branches
skip:
  - 'dependabot/**'
  - 'renovate/**'
  - 'temp/**'

# Only test specific files changed
onlyChanged: true
traceChanged: 'expanded'

# =======================
# üéØ TESTING STRATEGY
# =======================
# Viewports to test
modes:
  - name: mobile
    viewport: 375x667
  - name: tablet
    viewport: 768x1024
  - name: desktop
    viewport: 1200x800

# =======================
# üìä REPORTING
# =======================
# Junit XML output for CI
junitReport: true
xmlReport: 'chromatic-results.xml'

# =======================
# üîß CI/CD INTEGRATION
# =======================
# Exit codes for CI
exitOnceUploaded: true
exitZeroOnChanges: false

# Ignore specific stories for visual testing
ignoreLastBuildOnBranch: 'main'

# =======================
# üìÅ FILES TO IGNORE
# =======================
# Stories to skip in visual testing
ignore:
  - 'src/**/*.docs.stories.*'
  - 'src/**/*.test.stories.*'
  - 'libs/**/src/**/*.internal.stories.*'

# =======================
# üé® VISUAL SETTINGS
# =======================
# Threshold for visual changes
threshold: 0.2

# Animation handling
pauseAnimationAtEnd: true
delay: 1000

# =======================
# üöÄ BRANCH STRATEGY
# =======================
# Main branch configuration
baseBranch: 'main'

# Auto-accept changes on specific branches
autoAcceptChanges:
  - 'release/**'
  - 'hotfix/**'

# =======================
# üì± BROWSER SUPPORT
# =======================
# Browsers to test (Chromatic defaults)
browsers:
  - chrome
  - safari
  - firefox

# =======================
# üîê SECURITY
# =======================
# Don't capture sensitive data
allowConsoleErrors: false
diagnostics: false

# =======================
# üìà PERFORMANCE BUDGET
# =======================
# Build timeout
buildTimeout: 600000  # 10 minutes

# Concurrent uploads
concurrency: 4

# =======================
# üéØ MONOREPO SPECIFIC
# =======================
# Working directory for Nx
workingDir: './'

# Storybook configuration directory
storybookConfigDir: '.storybook'

# =======================
# üìã NOTIFICATIONS
# =======================
# Slack notifications (if configured)
# slackWebhook: ${SLACK_WEBHOOK_URL}

# GitHub status checks
githubToken: ${GITHUB_TOKEN}